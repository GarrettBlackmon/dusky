# -------------------------------------------------------------------------------------------------
# THEME SOURCE
# -------------------------------------------------------------------------------------------------
# Sourcing colors generated by Matugen
source = ~/.config/matugen/generated/hyprland-colors.conf

# -------------------------------------------------------------------------------------------------
# 1. GENERAL APPEARANCE
# Control gaps, borders, and layout behavior.
# See: https://wiki.hyprland.org/Configuring/Variables/#general
# -------------------------------------------------------------------------------------------------
general {
    # --- Gaps & Borders ---
    gaps_in = 6                 # Gap between windows
    gaps_out = 12                # Gap between windows and monitor edges
    border_size = 2             # Size of window borders

    # --- Colors ---
    # Uses variables from the sourced matugen file
    col.active_border = $primary
    col.inactive_border = $inverse_on_surface 

    # --- Behavior ---
    # RESIZING: Set to true. This allows you to resize windows by clicking and dragging
    # on the gaps/border area, rather than hitting the exact 2px pixel border.
    resize_on_border = true

    # TEARING: Allows lower latency in games. 
    # NOTE: To use this, you must also apply 'windowrulev2 = immediate, class:^(game_class)$'
    allow_tearing = true

    # Default layout engine - using master for ultrawide centered layout
    layout = master
}

# -------------------------------------------------------------------------------------------------
# 2. DECORATION
# Shadows, Blur, Opacity, and Rounding.
# See: https://wiki.hyprland.org/Configuring/Variables/#decoration
# -------------------------------------------------------------------------------------------------
decoration {
    # --- Rounding ---
    rounding = 6
    rounding_power = 6.0

    # --- Opacity ---
    active_opacity = 0.8
    inactive_opacity = 0.6
    fullscreen_opacity = 1.0

    # --- Dimming ---
    dim_inactive = true
    dim_strength = 0.2
    dim_special = 0.8           # Stronger dimming for special workspace to highlight content

    # --- Shadows ---
    # Enabled because your hardware (12700H) can easily handle it.
    shadow {
        enabled = true
        range = 35
        render_power = 2 #(values betwwen 1 and 4, no higher than 4, cuz invalid)
        color = rgba(1a1a1aee)
        #or
        #color= $primary
        #offset = 0 0    # Displaces shadow (x, y). 10 down makes it look like the light is above.
        #scale = 1
    }

    # --- Blur ---
    # Enabled for aesthetic depth.
    blur {
        enabled = true
        size = 4                # Radius
        passes = 2              # Quality (2 is a good balance of perf/looks)
        new_optimizations = true
        ignore_opacity = true   # Blurs behind transparent windows even if opacity is high
        xray = false            # If true, you can "see through" the blur.
        vibrancy = 0.1696
    }

    # --- Shaders ---
    # screen_shader = ~/.config/hypr/shaders/grayscale_advanced.glsl
}

# -------------------------------------------------------------------------------------------------
# 3. ANIMATIONS
# See: https://wiki.hyprland.org/Configuring/Animations/
# -------------------------------------------------------------------------------------------------

source = ~/.config/hypr/source/animations/active/active.conf

# -------------------------------------------------------------------------------------------------
# 4. LAYOUTS
# -------------------------------------------------------------------------------------------------
dwindle {
    pseudotile = true
    preserve_split = true
  # smart_split = false     # If true, splits based on mouse position.
  # smart_resizing = false  # If true, resizing direction is determined by mouse pos.
}

master {
    # Centered Master Layout for 32:9 Ultrawide (5120x1440)
    # First window appears centered at 2560px wide (16:9 region)
    # Additional windows tile in stacks on left and right sides
    
    # Center the master window
    orientation = center
    
    # Keep centered even with just 1 window (0 = always centered)
    slave_count_for_center_master = 0
    
    # Master takes exactly 50% width = 2560px (perfect 16:9 of ultrawide)
    # Leaves 1280px on each side for slave stacks
    mfact = 0.50
    
    # New windows go to sides as slaves, NOT replace master
    new_status = slave
    
    # Stack behavior for side windows
    new_on_top = false           # New slaves go to bottom of stack
    new_on_active = after        # New slaves appear after focused window
    allow_small_split = true     # Allow multiple thin slaves on each side
    smart_resizing = true        # Better resize behavior with mouse
}

# -------------------------------------------------------------------------------------------------
# 5. MISCELLANEOUS & PERFORMANCE
# See: https://wiki.hyprland.org/Configuring/Variables/#misc
# -------------------------------------------------------------------------------------------------
misc {
    force_default_wallpaper = 1     # Set to 0 to enable the anime mascot (if you want it), 1 to disable.
    disable_hyprland_logo = true
    disable_splash_rendering = true

    # --- Performance & Refresh Rate (consolidated from monitors.conf) ---
    # Variable frame rate can cause uneven frametimes/microstutter in games
    vfr = false
    
    # Variable Refresh Rate (FreeSync/G-SYNC Compatible)
    vrr = 1

    # --- Fullscreen Behavior (consolidated from window_rules.conf) ---
    # How to handle new windows when another window is fullscreen:
    # 0 = Do Nothing, 1 = Overlay, 2 = Unfullscreen
    on_focus_under_fullscreen = 2
    
    # Force new windows to spawn on the current workspace
    initial_workspace_tracking = 2
    
    # Allow apps to request focus
    focus_on_activate = true
}

# -------------------------------------------------------------------------------------------------
# 6. BINDS (Visual specific)
# -------------------------------------------------------------------------------------------------
binds {
    allow_pin_fullscreen = true
}

#debug {
#    overlay = true
#}
